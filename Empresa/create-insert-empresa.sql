CREATE DATABASE empresaDB;

USE empresaDB;

CREATE TABLE
    DEPARTAMENTO (DEP_NO INT UNSIGNED, DNOMBRE VARCHAR(50) NOT NULL, LOCALIDAD VARCHAR(50) NOT NULL, CONSTRAINT PK_DEPARTAMENTO_DEP_NO PRIMARY KEY (DEP_NO));

CREATE TABLE
    EMPLEADO (
        EMP_NO INT UNSIGNED,
        APELLIDO VARCHAR(50) NOT NULL,
        OFICIO VARCHAR(50) NOT NULL,
        DIRECTOR INT UNSIGNED,
        FECHA_ALTA DATE NOT NULL,
        SALARIO DECIMAL(9, 2) NOT NULL,
        COMISION DECIMAL(9, 2),
        DEP_NO INT UNSIGNED,
        CONSTRAINT PK_EMPLEADO_EMP_NO PRIMARY KEY (EMP_NO),
        CONSTRAINT FK_EMP_DIRECTOR FOREIGN KEY (DIRECTOR) REFERENCES EMPLEADO (EMP_NO) ON UPDATE CASCADE ON DELETE SET NULL,
        CONSTRAINT FK_EMP_DEP_NO FOREIGN KEY (DEP_NO) REFERENCES DEPARTAMENTO (DEP_NO) ON UPDATE CASCADE ON DELETE SET NULL
    );

CREATE TABLE
    CLIENTE (
        CLIENTE_NO INT UNSIGNED,
        NOMBRE VARCHAR(150) NOT NULL,
        LOCALIDAD VARCHAR(50) NOT NULL,
        VENDEDOR_NO INT UNSIGNED,
        DEBE DECIMAL(9, 2),
        HABER DECIMAL(9, 2),
        LIMITE_CREDITO DECIMAL(9, 2),
        CONSTRAINT PK_CLIENTE_NO PRIMARY KEY (CLIENTE_NO),
        CONSTRAINT FK_CLI_EMP_NO FOREIGN KEY (VENDEDOR_NO) REFERENCES EMPLEADO (EMP_NO) ON DELETE CASCADE ON UPDATE CASCADE
    );

CREATE TABLE
    PRODUCTO (PRODUCTO_NO INT UNSIGNED, DESCRIPCION VARCHAR(150) NULL, PRECIO_ACTUAL DECIMAL(8, 2), STOCK_DISPONIBLE INT UNSIGNED, CONSTRAINT PK_PRODUCTO_NO PRIMARY KEY (PRODUCTO_NO));

CREATE TABLE
    PEDIDO (
        PEDIDO_NO INT,
        PRODUCTO_NO INT UNSIGNED NOT NULL,
        CLIENTE_NO INT UNSIGNED NOT NULL,
        UNIDADES INT NOT NULL,
        FECHA_PEDIDO TIMESTAMP,
        CONSTRAINT PK_PEDIDO_NO PRIMARY KEY (PEDIDO_NO),
        CONSTRAINT FK_PEDIDO_PRODUCTO_NO FOREIGN KEY (PRODUCTO_NO) REFERENCES PRODUCTO (PRODUCTO_NO) ON UPDATE CASCADE ON DELETE CASCADE,
        CONSTRAINT FK_PEDIDO_CLIENTE_NO FOREIGN KEY (CLIENTE_NO) REFERENCES CLIENTE (CLIENTE_NO) ON UPDATE CASCADE ON DELETE CASCADE
    );

INSERT INTO
    DEPARTAMENTO
VALUES
    (10, 'CONTABILIDAD', 'BARCELONA');

INSERT INTO
    DEPARTAMENTO
VALUES
    (20, 'INVESTIGACION', 'VALENCIA');

INSERT INTO
    DEPARTAMENTO
VALUES
    (30, 'VENTAS', 'MADRID');

INSERT INTO
    DEPARTAMENTO
VALUES
    (40, 'PRODUCCION', 'SEVILLA');

INSERT INTO
    EMPLEADO
VALUES
    (7839, 'REY', 'PRESIDENTE', NULL, '1981-11-17', 6000, NULL, 10);

INSERT INTO
    EMPLEADO
VALUES
    (7698, 'GARRIDO', 'DIRECTOR', 7839, '1981-05-01', 3850.12, NULL, 30);

INSERT INTO
    EMPLEADO
VALUES
    (7782, 'MARTINEZ', 'DIRECTOR', 7839, '1981-06-09', 2450, NULL, 10);

INSERT INTO
    EMPLEADO
VALUES
    (7499, 'ALONSO', 'VENDEDOR', 7698, '1981-02-23', 1400, 400, 30);

INSERT INTO
    EMPLEADO
VALUES
    (7521, 'LOPEZ', 'EMPLEADO', 7782, '1981-05-08', 1350.50, NULL, 10);

INSERT INTO
    EMPLEADO
VALUES
    (7654, 'MARTIN', 'VENDEDOR', 7698, '1981-09-28', 1500, 1600, 30);

INSERT INTO
    EMPLEADO
VALUES
    (7844, 'CALVO', 'VENDEDOR', 7698, '1981-09-08', 1800, 0, 30);

INSERT INTO
    EMPLEADO
VALUES
    (7876, 'GIL', 'ANALISTA', 7782, '1982-05-06', 3350, NULL, 20);

INSERT INTO
    EMPLEADO
VALUES
    (7900, 'JIMENEZ', 'EMPLEADO', 7782, '1983-03-24', 1400, NULL, 20);

INSERT INTO
    CLIENTE
VALUES
    (101, 'DISTRIBUCIONES GOMEZ', 'MADRID', 7499, 0, 0, 5000);

INSERT INTO
    CLIENTE
VALUES
    (102, 'LOGITRONICA S.L', 'BARCELONA', 7654, 0, 0, 5000);

INSERT INTO
    CLIENTE
VALUES
    (103, 'INDUSTRIAS LACTEAS S.A.', 'LAS ROZAS', 7844, 0, 0, 10000);

INSERT INTO
    CLIENTE
VALUES
    (104, 'TALLERES ESTESO S.A.', 'SEVILLA', 7654, 0, 0, 5000);

INSERT INTO
    CLIENTE
VALUES
    (105, 'EDICIONES SANZ', 'BARCELONA', 7499, 0, 0, 5000);

INSERT INTO
    CLIENTE
VALUES
    (106, 'SIGNOLOGIC S.A.', 'MADRID', 7654, 0, 0, 5000);

INSERT INTO
    CLIENTE
VALUES
    (107, 'MARTIN Y ASOCIADOS S.L.', 'ARAVACA', 7844, 0, 0, 10000);

INSERT INTO
    CLIENTE
VALUES
    (108, 'MANUFACTURAS ALI S.A.', 'SEVILLA', 7654, 0, 0, 5000);

INSERT INTO
    PRODUCTO
VALUES
    (10, 'MESA DESPACHO MOD. GAVIOTA', 550, 50);

INSERT INTO
    PRODUCTO
VALUES
    (20, 'SILLA DIRECTOR MOD. BUFALO', 670, 25);

INSERT INTO
    PRODUCTO
VALUES
    (30, 'ARMARIO NOGAL DOS PUERTAS', 460, 20);

INSERT INTO
    PRODUCTO
VALUES
    (40, 'MESA MODELO UNIÃ“N', 340, 15);

INSERT INTO
    PRODUCTO
VALUES
    (50, 'ARCHIVADOR CEREZO', 1050, 20);

INSERT INTO
    PRODUCTO
VALUES
    (60, 'CAJA SEGURIDAD MOD B222', 280, 15);

INSERT INTO
    PRODUCTO
VALUES
    (70, 'DESTRUCTORA DE PAPEL A3', 450, 25);

INSERT INTO
    PRODUCTO
VALUES
    (80, 'MODULO ORDENADOR MOD. ERGOS', 550, 25);

INSERT INTO
    PEDIDO
VALUES
    (1000, 20, 103, 3, '2022-10-06');

INSERT INTO
    PEDIDO
VALUES
    (1001, 50, 106, 2, '2022-10-06');

INSERT INTO
    PEDIDO
VALUES
    (1002, 10, 101, 4, '2022-10-07');

INSERT INTO
    PEDIDO
VALUES
    (1003, 20, 105, 4, '2022-10-16');

INSERT INTO
    PEDIDO
VALUES
    (1004, 40, 106, 8, '2022-10-20');

INSERT INTO
    PEDIDO
VALUES
    (1005, 30, 105, 2, '2022-10-20');

INSERT INTO
    PEDIDO
VALUES
    (1006, 70, 103, 3, '2022-11-03');

INSERT INTO
    PEDIDO
VALUES
    (1007, 50, 101, 2, '2022-11-06');

INSERT INTO
    PEDIDO
VALUES
    (1008, 10, 106, 6, '2022-11-16');

INSERT INTO
    PEDIDO
VALUES
    (1009, 20, 105, 2, '2022-11-26');

INSERT INTO
    PEDIDO
VALUES
    (1010, 40, 102, 3, '2022-12-08');

INSERT INTO
    PEDIDO
VALUES
    (1011, 30, 106, 2, '2022-12-15');

INSERT INTO
    PEDIDO
VALUES
    (1012, 10, 105, 3, '2022-12-06');

INSERT INTO
    PEDIDO
VALUES
    (1013, 30, 106, 2, '2022-12-06');

INSERT INTO
    PEDIDO
VALUES
    (1014, 20, 101, 4, '2023-01-07');

INSERT INTO
    PEDIDO
VALUES
    (1015, 70, 105, 4, '2023-01-16');

INSERT INTO
    PEDIDO
VALUES
    (1017, 20, 105, 6, '2023-01-20');